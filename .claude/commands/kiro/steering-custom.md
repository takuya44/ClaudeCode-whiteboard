---
description: 専門的なプロジェクトコンテキストのためのカスタムKiroステアリング文書を作成する
allowed-tools: Bash, Read, Write, Edit, MultiEdit, Glob, Grep, LS
---

# Kiro カスタムステアリング作成

3 つの基盤ファイル（product.md、tech.md、structure.md）を超えた専門的なコンテキストのため、`.kiro/steering/`にカスタムステアリング文書を作成します。

## 現在のステアリングステータス

### 既存ステアリング文書

- コアステアリングファイル：!`ls -la .kiro/steering/*.md 2>/dev/null || echo "ステアリングディレクトリが見つかりません"`
- カスタムステアリング数：!`if [ -d ".kiro/steering" ]; then count=0; for f in .kiro/steering/*.md; do if [ -f "$f" ] && [ "$f" != ".kiro/steering/product.md" ] && [ "$f" != ".kiro/steering/tech.md" ] && [ "$f" != ".kiro/steering/structure.md" ]; then count=$((count + 1)); fi; done; echo "$count"; else echo "0"; fi`

### プロジェクト分析

- 専門分野：!`find . -path ./node_modules -prune -o -path ./.git -prune -o -type d \( -name "test*" -o -name "spec*" -o -name "api" -o -name "auth" -o -name "security" \) -print 2>/dev/null || echo "専門ディレクトリが見つかりません"`
- 設定パターン：!`find . -path ./node_modules -prune -o \( -name "*.config.*" -o -name "*rc.*" -o -name ".*rc" \) -print 2>/dev/null || echo "設定ファイルが見つかりません"`

## タスク：カスタムステアリング文書の作成

ユーザー要件に基づいて新しいカスタムステアリング文書を作成します。一般的な使用例には以下が含まれます：

### 一般的なカスタムステアリングタイプ

1. **API 標準**（`api-standards.md`）

   - REST/GraphQL 規約
   - エラーハンドリングパターン
   - 認証/認可アプローチ
   - レート制限とページネーション
   - API バージョニング戦略

2. **テストアプローチ**（`testing.md`）

   - テストファイル構成
   - テストの命名規則
   - モック戦略
   - カバレッジ要件
   - E2E vs ユニット vs 統合テスト

3. **コードスタイルガイドライン**（`code-style.md`）

   - 言語固有の規約
   - リンター以外のフォーマットルール
   - コメント標準
   - 関数/変数命名パターン
   - コード構成原則

4. **セキュリティポリシー**（`security.md`）

   - 入力検証要件
   - 認証パターン
   - シークレット管理
   - OWASP 準拠ガイドライン
   - セキュリティレビューチェックリスト

5. **データベース規約**（`database.md`）

   - スキーマ設計パターン
   - マイグレーション戦略
   - クエリ最適化ガイドライン
   - 接続プール設定
   - バックアップと復旧手順

6. **パフォーマンス標準**（`performance.md`）

   - 読み込み時間要件
   - メモリ使用量制限
   - 最適化技術
   - キャッシュ戦略
   - 監視とプロファイリング

7. **デプロイメントワークフロー**（`deployment.md`）
   - CI/CD パイプライン段階
   - 環境設定
   - リリース手順
   - ロールバック戦略
   - ヘルスチェック要件

## 包含モード選択

このステアリング文書がどの頻度でどのようなコンテキストで参照されるべきかに基づいて包含モードを選択：

### 1. 常に含まれる（カスタムファイルには控えめに使用）

- **使用時**：すべてのコードに適用される汎用標準（セキュリティポリシー、コア規約）
- **影響**：すべてのインタラクションでコンテキストサイズが増加
- **例**：重要なセキュリティ要件のための`security-standards.md`
- **推奨**：真に汎用的なガイドラインにのみ使用

### 2. 条件付き包含（ほとんどのカスタムファイルに推奨）

- **使用時**：特定のファイルタイプやディレクトリのドメイン固有ガイドライン
- **ファイルパターン**：`"*.test.js"`、`"src/api/**/*"`、`"**/auth/*"`、`"*.config.*"`
- **例**：テストファイル編集時のみ読み込まれる`testing-approach.md`
- **利点**：一般的なインタラクションを圧迫せずに関連コンテキスト

### 3. 手動包含（専門的なコンテキストに最適）

- **使用時**：時々必要になる専門知識
- **使用法**：特定の会話中に`@filename.md`で参照
- **例**：デプロイメント固有タスクのための`deployment-runbook.md`
- **利点**：必要時に利用可能、日常的なインタラクションを乱さない

## 文書構造ガイドライン

以下を含むカスタムステアリング文書を作成：

1. **明確なタイトルと目的**

   - この文書がプロジェクトのどの側面をカバーするか
   - このガイダンスをいつ適用すべきか

2. **具体的なガイドライン**

   - 従うべき具体的なルールとパターン
   - 重要な決定の根拠

3. **コード例**

   - 正しい実装パターンを示す
   - 役立つ場合は反例も含める

4. **統合ポイント**
   - 他のステアリング文書との関係
   - 依存関係や前提条件

## セキュリティと品質ガイドライン

### セキュリティ要件

- **機密データを含めない**：API キー、パスワード、データベース URL、シークレットなし
- **機密コンテキストをレビュー**：内部サーバー名、プライベート API エンドポイントを避ける
- **チームアクセス意識**：すべてのステアリングコンテンツはチームメンバーと共有される

### コンテンツ品質標準

- **単一責任**：1 つのステアリングファイル = 1 つのドメイン（API とデータベースガイドラインを混在させない）
- **具体的な例**：コードスニペットと実際のプロジェクト例を含める
- **明確な根拠**：特定のアプローチが好まれる理由を説明
- **維持可能なサイズ**：ファイルあたり 2-3 分の読み取り時間を目標

## 手順

1. **ユーザーに以下を質問**：

   - 文書名（.md で終わる説明的なファイル名）
   - カスタムステアリングのトピック/目的
   - 包含モードの設定
   - 条件付き包含の特定パターン（該当する場合）

2. **`.kiro/steering/`に文書を作成**、以下を含む：

   - 明確で焦点を絞ったコンテンツ（2-3 分読み取り）
   - 実用的な例
   - 他のステアリングファイルと一貫したフォーマット

3. **包含モードを文書化**、トップにコメントを追加：

   ```markdown
   <!-- 包含モード：Always | Conditional: "pattern" | Manual -->
   ```

4. **文書を検証**、以下を確認：
   - 既存のステアリングコンテンツと重複しない
   - 指定されたコンテキストに独自の価値を提供
   - マークダウンベストプラクティスに従う

記憶：カスタムステアリング文書は基盤の 3 つのファイルを補完するものであり、置き換えるものではありません。プロジェクトの特定の側面に専門的なコンテキストを提供します。

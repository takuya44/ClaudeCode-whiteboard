# /04_update_github_pr

## 使い方

```
/04_update_github_pr [PR番号]
```

既存のPRに新しいコミットをプッシュして、PRの内容を更新します。PR番号は任意で指定できます。

### 使用例

```
# 現在のブランチに対応するPRを自動検出して更新
/04_update_github_pr

# PR番号を明示的に指定して更新
/04_update_github_pr 45

# 特定のPRを指定して更新
/04_update_github_pr 123
```

## 実行内容

### 1. 事前確認

- [ ] PR番号の特定
  - 引数で指定された場合: `$ARGUMENTS`を使用
  - 引数がない場合: 現在のブランチに対応するPRを自動検出（`gh pr status`で確認）
- [ ] 対象PRの存在確認と現在の状態把握
- [ ] 新しいコミットの確認（`git log`でリモートとの差分確認）

### 2. 変更内容の準備

- [ ] ステージングエリアと作業ディレクトリの状態確認
- [ ] 新しいコミットがある場合の内容確認
- [ ] リモートブランチとの同期状況確認

### 3. PR更新処理

- [ ] 新しいコミットをリモートブランチにプッシュ
  ```bash
  git push origin [current-branch]
  ```
- [ ] PRの現在の内容を取得
- [ ] 必要に応じてPRの説明文を更新

### 4. PR編集

`gh pr edit` を使用して以下を更新：

#### 更新可能な項目

- **タイトル**: 新しい変更内容を反映
- **本文**: 追加された変更内容を含めて更新
- **ラベル**: 必要に応じて追加/変更

#### 更新された本文テンプレート

```markdown
## 概要

#[issue番号]

[変更内容の簡潔な説明 - 更新内容を含む]

## 変更内容

### 最新の変更（[日付]）
- [新しく追加された変更点 1]
- [新しく追加された変更点 2]

### 以前の変更
- [以前の変更点 1]
- [以前の変更点 2]

## レビューポイント

- [新しく確認してほしい点 1]
- [新しく確認してほしい点 2]
- [以前からの確認点で未解決のもの]

## 動作確認

- [ ] [新しい確認項目 1]
- [ ] [新しい確認項目 2]
- [x] [完了済みの確認項目]

## 更新履歴

- [日付] - [更新内容の簡潔な説明]
- [以前の更新日] - [以前の更新内容]

## 関連 Issue

- refs #[issue番号]

## スクリーンショット

- 新しい変更に関するスクリーンショットを追加
- **Playwright MCP を使用してキャプチャを取得してください**
```

## 確認事項

### 5. 更新完了後の確認

- [ ] PRページで変更内容が正しく反映されているか確認
- [ ] 新しいコミットがPRに含まれているか確認
- [ ] CI/CDパイプラインが正常に実行されているか確認
- [ ] レビュアーに変更通知が送られているか確認

## 注意事項

- 既存PRのコンテキストを保持しながら新しい変更を追加
- レビュアーが変更内容を把握しやすいよう更新履歴を明記
- 新しい変更に対応するテストや動作確認項目を追加
- PR本文は日本語で簡潔に記載
- 大きな変更の場合は、レビュアーに事前に相談することを推奨
- force pushを使用する場合は事前に確認